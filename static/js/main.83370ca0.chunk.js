(this.webpackJsonpsimpchat=this.webpackJsonpsimpchat||[]).push([[0],{42:function(e,t,a){e.exports=a(64)},47:function(e,t,a){},48:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},49:function(e,t,a){},63:function(e,t,a){e.exports=a.p+"static/media/simpBack.be90594a.png"},64:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(24),l=a.n(r),o=(a(47),a(48),a(49),a(7)),i=a(8),c=a(4),d=a(10),u=a(11),m=a(15),p=a.n(m),h=a(29);a(50),a(21);h.initializeApp({apiKey:"AIzaSyBztQYs1Fmzw1MrOH8GWORisAWsxTaBIGg",authDomain:"simpapp-d607a.firebaseapp.com",databaseURL:"https://simpapp-d607a.firebaseio.com",projectId:"simpapp-d607a",storageBucket:"simpapp-d607a.appspot.com",messagingSenderId:"541886811215",appId:"1:541886811215:web:f754383a9317280645ae3a",measurementId:"G-F3YWSQ3QXK"});var g=h,f=a(3),v=a(9),E=a(23),b=a.n(E),y=a(31);function N(e){return{type:"set_redirect_url",payload:e}}var O=function(){return function(){var e=Object(y.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{g.auth().onAuthStateChanged((function(e){if(e)if(console.log(e.emailVerified),e.emailVerified){e=g.auth().currentUser;t({type:"login",payload:!0})}else t({type:"logout",payload:!1});else t({type:"logout",payload:!1})}))}catch(a){console.log(a)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},_=function(){return function(){var e=Object(y.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{g.auth().onAuthStateChanged((function(e){e&&g.firestore().collection("users").doc(e.uid).onSnapshot((function(e){console.log("Current data: ",e.data()),t({type:"setUser",payload:e.data()})}))}))}catch(a){console.log(a)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},w=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).signIn=n.signIn.bind(Object(c.a)(n)),n.state={loggedIn:!1,error:""},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;g.auth().onAuthStateChanged((function(t){if(console.log("hi"),t)if(t.emailVerified){var a=Object.assign(e.state,e.props);e.setState(a);t=g.auth().currentUser;e.props.dispatch(function(e){return{type:"setUser",payload:e}}(t)),e.props.dispatch(!0?{type:"login",payload:!0}:{type:"logout",payload:!1})}else e.state.error="Please verify your email",g.auth().signOut().then((function(){})).catch((function(e){}))}))}},{key:"signIn",value:function(e){e.preventDefault();var t=document.getElementById("email").value,a=document.getElementById("password").value,n=this;g.auth().signInWithEmailAndPassword(t,a).then((function(){var e=g.auth().currentUser;if(console.log(e.emailVerified),e.emailVerified)document.getElementById("name").value;else n.state.error="Please verify your email",g.auth().signOut().then((function(){})).catch((function(e){}))})).catch((function(e){e.code;var t=e.message;n.state.error=t,n.setState(n.state)}))}},{key:"render",value:function(){if(console.log("logged in"),this.props.session.logged_in)return console.log(this.props.session),s.a.createElement(f.a,{to:this.props.session.redirect_url});return s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"card"},s.a.createElement("h1",{className:"header center black-text"},"Login"),s.a.createElement("hr",null),s.a.createElement("div",{className:"card-content red-text"},s.a.createElement("p",{id:"error"},this.state.error),s.a.createElement("form",null,s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"input-field col s12"},s.a.createElement("input",{id:"email",type:"email",className:"validate"}),s.a.createElement("label",{htmlFor:"email"},"Email"))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"input-field col s12"},s.a.createElement("input",{id:"password",type:"password",className:"validate"}),s.a.createElement("label",{htmlFor:"password"},"password"))),s.a.createElement("div",{className:"center"},s.a.createElement("div",{className:"input-field col s12"},s.a.createElement("button",{className:"btn waves-effect ",style:{backgroundColor:"#fff",color:"#212121"},type:"submit",onClick:this.signIn,name:"action"},"Login")))))))}}]),a}(s.a.Component);var j=Object(v.b)((function(e){return console.log(e),e}))(w),k=a(17),x=a(39),I=a.n(x),S=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={photoURL:""},n}return Object(i.a)(a,[{key:"render",value:function(){var e,t,a=g.firestore().collection("users").doc(this.props.user_id),n=this;return a.get().then((function(e){n.setState({photoURL:e.data().photoURL})})).catch((function(e){console.log("Error getting document:",e)})),e=this.props.user_id!=this.props.user.user_id?s.a.createElement("div",{className:"name "},s.a.createElement("img",{src:this.state.photoURL,style:{width:"40px"},alt:"",className:"circle  z-depth-4"}),s.a.createElement("br",null),s.a.createElement("span",{className:"title "},this.props.name)):"",t=this.props.user_id==this.props.user.user_id?s.a.createElement("div",{className:"name"},s.a.createElement("img",{src:this.props.user.photoURL,style:{width:"40px"},alt:"",className:"circle  z-depth-4"}),s.a.createElement("br",null),s.a.createElement("span",{className:"title "},this.props.name)):"",s.a.createElement("div",{className:this.props.user_id==this.props.user.user_id?"box-gray-self ":"box-gray "},e,s.a.createElement("div",{className:"message-body z-depth-4"},s.a.createElement("p",null,this.props.message),s.a.createElement("div",{className:""},"(",this.props.date,")")),t)}}]),a}(s.a.Component);var U=Object(v.b)((function(e){return e}))(S),C=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).handleMsg=a.handleMsg.bind(Object(c.a)(a)),a.handleButton=a.handleButton.bind(Object(c.a)(a)),a.state={messages:[],logged_in:!0,user:null},a}return Object(i.a)(n,[{key:"add_messages",value:function(e){g.firestore().collection("messages").add({Name:this.props.user.displayName,message:e,user_id:this.props.user.user_id,created:g.firestore.FieldValue.serverTimestamp()}).then((function(e){var t=document.getElementById("message_div");t.scrollTop=t.scrollHeight})).catch((function(e){console.error("Error adding document: ",e)}))}},{key:"handleMsg",value:function(e){if("Enter"===e.key){var t=document.getElementById("msg_inp").value;this.add_messages(t)}}},{key:"handleButton",value:function(e){e.preventDefault();var t=document.getElementById("msg_inp").value;this.add_messages(t)}},{key:"componentDidMount",value:function(){this.props.dispatch(O()),this.props.dispatch(_()),document.addEventListener("DOMContentLoaded",(function(){var e=document.querySelectorAll(".parallax");p.a.Parallax.init(e,0)}));var e=document.querySelectorAll(".parallax");p.a.Parallax.init(e,0);document.addEventListener("DOMContentLoaded",(function(){var e=document.querySelectorAll(".materialboxed");p.a.Materialbox.init(e,0)}));var t=this,a=Object.assign(t.state,t.props);a.session.logged_in=t.props.session.logged_in,t.setState(a),g.firestore().collection("messages").orderBy("created").onSnapshot((function(e){var a=[];e.forEach((function(e){a.push({id:e.id,user_id:e.data().user_id,name:e.data().Name,message:e.data().message,created:e.data().created})})),t.state.messages=a,t.setState(t.state);var n=document.getElementById("message_div");n.scrollTop=n.scrollHeight}))}},{key:"componentDidUpdate",value:function(e){if(this.props.session.logged_in!=e.session.logged_in||e.user.displayName!=this.state.user.displayName){var t=Object.assign(this.state,this.props);this.setState(t)}}},{key:"render",value:function(){if(!0===this.props.session.logged_in){return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{class:"parallax-container"},s.a.createElement("div",{class:"parallax"},s.a.createElement("img",{class:"materialboxed",src:a(63),style:{transform:"translate3d(-50%, 355.605px, 0px)",opacity:1}}),s.a.createElement("div",{class:"mask",style:{width:"100%",height:"100%",opacity:.7,backgroundColor:"white",position:"absolute",top:"0"}},s.a.createElement("h1",{className:"header center black-text"},"SimpChat "),s.a.createElement("h2",{className:"center"},null!=this.state.user?"Hello "+this.state.user.displayName:""," Time to get your simp up!!!")))),s.a.createElement("section",{class:"section grey-bg"},s.a.createElement("div",{className:"container white z-depth-4"},s.a.createElement("div",{className:"card"},s.a.createElement("h2",{className:" header center"},"Chat"),s.a.createElement("div",{class:"card-content"},s.a.createElement("div",{className:"messages",id:"message_div"},s.a.createElement("br",null),this.state.messages.map((function(e){e.message;return s.a.createElement(U,{key:e.id,name:e.name,user_id:e.user_id,message:e.message,date:s.a.createElement(I.a,{format:"YYYY/MM/DD hh:mm:ss"},null!=e.created?e.created.toDate(" HH:mm:ss"):"")})}))),s.a.createElement("div",{className:"messageInput"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"input-field suffix col s12 black-text"},s.a.createElement("input",{onKeyPress:this.handleMsg,id:"msg_inp",className:"validate send"}),s.a.createElement("a",{onClick:this.handleButton,class:"btn-floating btn-large waves-effect waves-light blue"},s.a.createElement("i",{className:"material-icons"},"send"))))))))))}return this.props.dispatch(N("/shimpchat")),s.a.createElement(f.a,{to:"/login"})}}]),n}(s.a.Component);var B=Object(v.b)((function(e){return e}))(C),L=a(18),D=(a(36),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={image:null,progress:0},n.handle_file_change=n.handle_file_change.bind(Object(c.a)(n)),n.handle_upload=n.handle_upload.bind(Object(c.a)(n)),n}return Object(i.a)(a,[{key:"handle_file_change",value:function(e){var t=e.target.files[0];this.setState(Object(L.a)({},this.state,{image:t}))}},{key:"handle_upload",value:function(e){var t=this;console.log("heel");var a=this.state.image,n=this,s=g.storage();s.ref("images/".concat(this.state.image.name)).put(this.state.image).on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);n.setState(Object(L.a)({},n.state,{progress:t})),console.log(n.state.progress)}),(function(e){console.log(e)}),(function(){s.ref("images").child(a.name).getDownloadURL().then((function(e){return g.firestore().collection("users").doc(t.props.user.user_id).update({photoURL:e}).then((function(){console.log("Document successfully updated!")})).catch((function(e){console.error("Error updating document: ",e)}))}))}))}},{key:"componentDidMount",value:function(){console.log("t"+this.state),this.props.dispatch(O()),this.props.dispatch(_());var e=Object.assign(this.state,this.props);e.session.logged_in=this.props.session.logged_in,this.setState(e),console.log("t"+this.state)}},{key:"componentDidUpdate",value:function(e){if(this.props.session.logged_in!=e.session.logged_in||e.user.displayName!=this.state.user.displayName){var t=Object.assign(this.state,this.props);this.setState(t),console.log(this.state)}}},{key:"render",value:function(){return!0===this.props.session.logged_in?s.a.createElement("div",{className:"bg1"},s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"card"},s.a.createElement("h1",{className:"header center black-text"},"Upload your Profile picture"),s.a.createElement("hr",null),s.a.createElement("div",{className:"card-content black-text"},s.a.createElement("span",{className:"center green-text"}," ",100==this.state.progress?"Profile Picture Successfully updated":""," "),s.a.createElement("div",{className:"progress"},s.a.createElement("div",{className:"determinate",style:{width:this.state.progress+"%"}})),s.a.createElement("div",{className:"row"},s.a.createElement("label",null,"Upload your picture"),s.a.createElement("div",{className:"file-field input-field"},s.a.createElement("div",{className:"btn",style:{backgroundColor:"rgba(54, 162, 255, 0.77)",color:"#212121"}},s.a.createElement("span",null,"Browse"),s.a.createElement("input",{type:"file",accept:"image/*",onChange:this.handle_file_change})),s.a.createElement("div",{className:"file-path-wrapper"},s.a.createElement("input",{className:"file-path validate",type:"text",placeholder:"Upload file"})))),s.a.createElement("div",{className:"center"},s.a.createElement("div",{className:"input-field col s12"},s.a.createElement("button",{className:"btn waves-effect ",style:{backgroundColor:"#fff",color:"#212121"},onClick:this.handle_upload,name:"action"},"Upload"))))))):(this.props.dispatch(N("/profile-picture")),s.a.createElement(f.a,{to:"/login"}))}}]),a}(s.a.Component));var M=Object(v.b)((function(e){return console.log(e),e}))(D),R=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).signUp=n.signUp.bind(Object(c.a)(n)),n.state={loggedIn:!1,error:""},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){g.auth().onAuthStateChanged((function(e){if(e)e=g.auth().currentUser,document.getElementById("name").value}))}},{key:"signUp",value:function(e){e.preventDefault();var t=this,a=document.getElementById("email").value,n=document.getElementById("password").value;g.auth().createUserWithEmailAndPassword(a,n).then((function(){t.state.error="",t.setState(t.state),g.auth().signInWithEmailAndPassword(a,n).then((function(){var e=g.auth().currentUser,t=document.getElementById("name").value;e.sendEmailVerification(),g.storage().ref().child("images/default-avatar.png").getDownloadURL().then((function(a){g.firestore().collection("users").doc(e.uid).set({displayName:t,user_id:e.uid,photoURL:a,created:g.firestore.FieldValue.serverTimestamp()}).then((function(n){e.updateProfile({displayName:t,photoURL:a}).then((function(){g.auth().signOut().then((function(){})).catch((function(e){})),console.log("usern"+e.displayName),window.location.href="/login"})).catch((function(e){}))})).catch((function(e){console.error("Error adding document: ",e)}))}))})).catch((function(e){e.code;var a=e.message;console.log(a),t.state.error=a,t.setState(t.state)}))})).catch((function(e){e.code;var a=e.message;console.log("h"+a),t.state.error=a,t.setState(t.state),console.log(t.state.error)}))}},{key:"render",value:function(){console.log(this.state);return this.state.loggedIn?(console.log("logged in"),s.a.createElement(f.a,{to:"/shimpchat"})):s.a.createElement("div",{class:"container"},s.a.createElement("div",{class:"card"},s.a.createElement("h1",{className:"header center black-text"},"Register"),s.a.createElement("hr",null),s.a.createElement("div",{className:"card-content red-text"},s.a.createElement("p",{id:"error"},this.state.error),s.a.createElement("form",null,s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"input-field col s12"},s.a.createElement("input",{id:"name",type:"text",className:"validate"}),s.a.createElement("label",{for:"name"},"name"))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"input-field col s12"},s.a.createElement("input",{id:"email",type:"email",className:"validate"}),s.a.createElement("label",{for:"email"},"Email"))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"input-field col s12"},s.a.createElement("input",{id:"password",type:"password",className:"validate"}),s.a.createElement("label",{for:"password"},"password"))),s.a.createElement("div",{className:"center"},s.a.createElement("div",{className:"input-field col s12"},s.a.createElement("button",{className:"btn waves-effect ",style:{backgroundColor:"#fff",color:"#212121"},type:"submit",onClick:this.signUp,name:"action"},"Register")))))))}}]),a}(s.a.Component);var A=Object(v.b)((function(e){return{user:e.user,logged_in:e.logged_in}}))(R),P=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleLogOut=n.handleLogOut.bind(Object(c.a)(n)),n.state={loggedIn:!1},n}return Object(i.a)(a,[{key:"handleLogOut",value:function(e){e.preventDefault();var t=this;g.auth().signOut().then((function(){t.state.loggedIn=!1,t.setState(t.state)})).catch((function(e){}))}},{key:"componentDidMount",value:function(){document.addEventListener("DOMContentLoaded",(function(){var e=document.querySelectorAll(".sidenav");p.a.Sidenav.init(e,0)}));var e=this;g.auth().onAuthStateChanged((function(t){if(console.log("hi"),t){t=g.auth().currentUser;e.state.loggedIn=!0,e.setState(e.state)}}))}},{key:"render",value:function(){return s.a.createElement(k.a,null,s.a.createElement("nav",{className:" blue darken-3"},s.a.createElement("div",{className:"nav-wrapper"},s.a.createElement("a",{href:"#!",className:"brand-logo"},"Logo"),s.a.createElement("a",{href:"#","data-target":"mobile-demo",className:"sidenav-trigger"},s.a.createElement("i",{className:"material-icons"},"menu")),s.a.createElement("ul",{className:"right hide-on-med-and-down"},s.a.createElement("li",null,s.a.createElement(k.b,{to:"/shimpchat"},"home")," "),this.state.loggedIn?"":s.a.createElement("li",null,s.a.createElement(k.b,{to:"/login"},"login")),s.a.createElement("li",null,s.a.createElement(k.b,{to:"/Register"},"Register")),s.a.createElement("li",null,s.a.createElement(k.b,{to:"/profile-picture"},"Profile")),this.state.loggedIn?s.a.createElement("li",null,s.a.createElement("a",{href:"",onClick:this.handleLogOut},"logout")):""))),s.a.createElement("ul",{className:"sidenav",id:"mobile-demo"},s.a.createElement("li",null,s.a.createElement(k.b,{to:"/shimpchat"},"home")," "),s.a.createElement("li",null,s.a.createElement(k.b,{to:"/login"},"login")),s.a.createElement("li",null,s.a.createElement("a",{href:"collapsible.html"},"Javascript")),s.a.createElement("li",null,s.a.createElement("a",{href:"mobile.html"},"Mobile"))),s.a.createElement(f.d,null,s.a.createElement(f.b,{exact:!0,path:"/shimpchat",component:B}),s.a.createElement(f.b,{path:"/login",component:j}),s.a.createElement(f.b,{path:"/profile-picture",component:M}),s.a.createElement(f.b,{path:"/Register",component:A})))}}]),a}(s.a.Component);var T=function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(P,null),s.a.createElement("div",{className:"container"}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var z=a(16),F=a(40),V=a(41),W={};var H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setUser":return t.payload;case"getdefaultprofileurl":return[].concat(Object(V.a)(e),[t.payload]);default:return e}},Y={logged_in:!1,redirect_url:"/shimpchat"};var q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"login":return Object(L.a)({},e,{logged_in:!0});case"logout":return Object(L.a)({},e,{logged_in:!1});case"set_redirect_url":return Object(L.a)({},e,{redirect_url:t.payload});default:return e}},G=Object(z.c)({user:H,session:q}),J=Object(z.e)(G,{},Object(z.d)(Object(z.a)(F.a),window.devToolsExtension?window.devToolsExtension():function(e){return e}));l.a.render(s.a.createElement(v.a,{store:J},s.a.createElement(T,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[42,1,2]]]);
//# sourceMappingURL=main.83370ca0.chunk.js.map